# Lexecon Environment Variables for Railway Deployment

# Node Configuration
LEXECON_NODE_ID=railway-node

# Logging Configuration
LEXECON_LOG_LEVEL=INFO
LEXECON_LOG_FORMAT=json

# Policy Configuration
LEXECON_POLICY_MODE=strict

# API Configuration (Railway will set PORT automatically)
# PORT=8000

# Data Directory (Railway provides persistent storage)
# LEXECON_DATA_DIR=/data/.lexecon

# CORS Configuration (Add your frontend URL)
LEXECON_CORS_ORIGINS=https://lex-agent-guard.lovable.app

# Optional: Database URL if using external database
# DATABASE_URL=

# Optional: Redis URL if using caching
# REDIS_URL=

# Rate Limiting Configuration (Phase 1A)
LEXECON_RATE_LIMIT_ENABLED=true
# Format: requests/seconds (e.g., 100/60 = 100 requests per 60 seconds)
LEXECON_RATE_LIMIT_GLOBAL_PER_IP=100/60
LEXECON_RATE_LIMIT_AUTH_LOGIN=5/300
LEXECON_RATE_LIMIT_API_PER_USER=1000/3600

# Secrets Management Configuration (Phase 1D)
# Master key for encrypting .env files (development)
# Generate with: python scripts/manage_secrets.py generate
LEXECON_MASTER_KEY=

# Database encryption key (for MFA secrets, sensitive fields)
# Set directly OR use _FILE suffix to read from file (Docker Secrets)
DB_ENCRYPTION_KEY=
# DB_ENCRYPTION_KEY_FILE=/run/secrets/db_encryption_key

# RSA private key password (for digital signatures)
RSA_KEY_PASSWORD=
# RSA_KEY_PASSWORD_FILE=/run/secrets/rsa_private_key_password

# Session secret key (for session token signing)
SESSION_SECRET_KEY=
# SESSION_SECRET_KEY_FILE=/run/secrets/session_secret_key

# MFA encryption key (for TOTP secrets)
MFA_ENCRYPTION_KEY=
# MFA_ENCRYPTION_KEY_FILE=/run/secrets/mfa_encryption_key

# Environment (affects security headers, HSTS)
LEXECON_ENV=development  # or 'production'

# Base URL (required for OAuth callbacks in Phase 1F)
LEXECON_BASE_URL=http://localhost:8000

# OIDC OAuth Configuration (Phase 1F - Optional)
# Configure providers you want to enable for SSO

# Google OAuth
# Get credentials at: https://console.cloud.google.com/apis/credentials
# Authorized redirect URIs: {LEXECON_BASE_URL}/auth/oidc/callback/google
OIDC_GOOGLE_CLIENT_ID=
OIDC_GOOGLE_CLIENT_SECRET=

# Azure AD / Microsoft OAuth
# Get credentials at: https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps
# Authorized redirect URIs: {LEXECON_BASE_URL}/auth/oidc/callback/azure
OIDC_AZURE_CLIENT_ID=
OIDC_AZURE_CLIENT_SECRET=
OIDC_AZURE_TENANT_ID=common  # or your specific tenant ID

# Okta OAuth
# Example custom provider configuration:
# OIDC_CUSTOM_DISCOVERY_URL=https://your-domain.okta.com/.well-known/openid-configuration
# OIDC_CUSTOM_CLIENT_ID=your-client-id
# OIDC_CUSTOM_CLIENT_SECRET=your-client-secret

# Auth0 OAuth
# Example: OIDC_CUSTOM_DISCOVERY_URL=https://your-domain.auth0.com/.well-known/openid-configuration

# Any OIDC-compliant provider
OIDC_CUSTOM_DISCOVERY_URL=
OIDC_CUSTOM_CLIENT_ID=
OIDC_CUSTOM_CLIENT_SECRET=

# ================================================================================
# FEATURE FLAGS (Phase 5.4)
# ================================================================================

# Feature Flags Mode
# Options: "env" (environment variables) or "launchdarkly" (LaunchDarkly SDK)
FEATURE_FLAGS_MODE=env

# LaunchDarkly SDK Key (only needed if FEATURE_FLAGS_MODE=launchdarkly)
# Get from: LaunchDarkly Dashboard → Account Settings → Projects → Lexecon
# LAUNCHDARKLY_SDK_KEY=sdk-xxxxx-xxxxx-xxxxx

# Feature Flags (Environment Variable Mode)
# Format: FEATURE_FLAG_<FLAG_NAME>=<value>
# Boolean: true/false, 1/0, yes/no, on/off
# Number: 100, 1000.5
# String: "value"
# JSON: {"key": "value"}

# Security & Authentication
FEATURE_FLAG_MFA_REQUIRED=false
FEATURE_FLAG_MFA_ENROLLMENT_MANDATORY=false
FEATURE_FLAG_PASSWORD_EXPIRATION_ENABLED=true
FEATURE_FLAG_SESSION_TIMEOUT_STRICT=true

# Rate Limiting
FEATURE_FLAG_RATE_LIMITING_STRICT=true
FEATURE_FLAG_RATE_LIMIT_PER_USER=100
FEATURE_FLAG_RATE_LIMIT_GLOBAL=10000

# Decision Engine
FEATURE_FLAG_NEW_DECISION_ENGINE=false
FEATURE_FLAG_DECISION_CACHING_ENABLED=true
FEATURE_FLAG_DECISION_ASYNC_EVALUATION=false
FEATURE_FLAG_DECISION_BATCH_PROCESSING=false

# Ledger & Audit
FEATURE_FLAG_LEDGER_COMPRESSION_ENABLED=true
FEATURE_FLAG_LEDGER_ENCRYPTION_ENABLED=true
FEATURE_FLAG_AUDIT_LOG_RETENTION_DAYS=90

# API Features
FEATURE_FLAG_API_VERSIONING_ENABLED=true
FEATURE_FLAG_API_DEPRECATION_WARNINGS=true
FEATURE_FLAG_GRAPHQL_ENABLED=false
FEATURE_FLAG_WEBHOOKS_ENABLED=false

# Observability
FEATURE_FLAG_METRICS_DETAILED=true
FEATURE_FLAG_TRACING_ENABLED=false
FEATURE_FLAG_PERFORMANCE_PROFILING=false

# Compliance
FEATURE_FLAG_GDPR_MODE_ENABLED=false
FEATURE_FLAG_HIPAA_MODE_ENABLED=false
FEATURE_FLAG_DATA_RESIDENCY_ENFORCEMENT=false

# Experimental
FEATURE_FLAG_EXPERIMENTAL_FEATURES=false
FEATURE_FLAG_BETA_FEATURES=false
